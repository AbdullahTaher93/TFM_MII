To make the curry paste: Put the ingredients in a blender. Blend until the consistency of a fine paste, scraping down the sides of the bowl as necessary. Rub all but ¼ cup of the curry paste onto the lamb shanks. Cover both the lamb shanks and the curry paste and refrigerate overnight. Heat half the oil in a large skillet over high heat. Season the lamb with salt and pepper and add to the pan. Sear until nicely browned, then turn and sear the other side. Remove from the heat and set aside. Put the lemongrass, galangal, chiles, lime leaves, and ¼ cup of the cilantro leaves in a piece of cheesecloth. Wrap and secure the sachet with kitchen string. Heat the remaining 1½ tablespoons oil in a large deep pot or Dutch oven, which can later be covered, over medium heat. Add the onion and cook until softened, about 5 minutes. Add the reserved curry paste and cook, stirring occasionally, until fragrant, about 3 minutes. Add the lamb shanks, stock, 1 cup of the coconut milk, and the sachet. Bring to a boil and then lower the heat and simmer, partially covered, until the meat is falling off the bone, at least 1 hour and probably longer. Remove the meat to another platter, cover, and refrigerate until serving time. Remove the sachet and chill the sauce, covered, in the refrigerator. When it has chilled, remove the fat with a spoon. Meanwhile, fill a large bowl with water and ice and set aside. Bring a small pot of water to a boil and add the remaining cilantro leaves (reserving the sprigs for garnish). As soon as the water returns to a boil, drain the leaves and transfer to the ice water, reserving the cooking liquid. When cold, drain again, and put the leaves in a blender with 2 tablespoons of the reserved liquid. Purée until smooth and set aside. Fill a large bowl with water and ice and set aside. Bring a large pot of water to a boil. Add the carrots, turnips, scallions, peas, and beans and cook just until tender, about 3 minutes. Immediately transfer to the ice water, drain, and set aside. Bring the skimmed sauce back to a steady simmer in a large saucepan. Add the meat and eggplant and cook until the meat is reheated and the eggplant tender, about 15 minutes. Stir in the cilantro purée and remaining ½ cup coconut milk. . Melt the butter in a skillet over medium heat. Add the carrots, turnips, scallions, peas, and beans, season to taste with salt, and sauté to reheat. . Put the lamb in the center of the serving plates. Spoon the eggplant and green curry sauce and the sautéed vegetables around the lamb, garnish with cilantro sprigs, and serve.