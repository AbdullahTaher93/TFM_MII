Rinse, peel, and devein the shrimp. Rinse again and set aside. (If your shrimp are large rather than medium, you may want to cut them in half.) Place the other ingredients near your stove top. Set a wok or a large heavy skillet over medium heat and add the oil. When it is hot, toss in the fennel, nigella, and cumin seeds and the cinnamon stick, and stir-fry for a minute or so, until the spices release their aroma. Toss in the garlic and ginger and stir-fry for about 1 minute. Add the onions and stir-fry for 5 minutes, then lower the heat and cook slowly for another 5 minutes, or until the onions brown a little. Add the green chiles and stir-fry for about a minute, then raise the heat to high, add the water, and cook, stirring occasionally, until the onions are very soft and most of the liquid has evaporated. (The dish can be made ahead to this point and set aside at room temperature for an hour. Begin again by adding Â¼ cup water to the pan, placing it over high heat, and stirring occasionally until the onions are hot, then proceed.) Add the salt and the shrimp and stir-fry until the shrimp have all changed color, 3 to 8 minutes, depending on the size of your pan, the size of the shrimp, and whether or not you began with hard-frozen shrimp. Turn out onto a plate, remove the cinnamon stick if you wish, and serve, topped, if you wish, with sprigs of coriander. Put out a plate of lime wedges. Serve with rice, a small plate of crisp sliced cucumber or white radish (daikon), and a dish to provide a contrast to the sweetness of the shrimp and onion.