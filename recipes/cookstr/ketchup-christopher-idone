Coarsely chop the tomatoes and place them in the kettle with the reserved juice. Stud the onion with the cloves and tie it in a double layer of dampened cheesecloth along with the allspice, peppercorns, and rosemary. Add the cheesecloth bag, celery heart, brown sugar, vinegar and a little salt to the tomatoes and bring to a boil, stirring from time to time, over high heat. Reduce the heat to low and simmer, stirring frequently, for 1 1/2 to 2 hours, or until reduced by half. Puree the ketchup in a food mill and taste for seasoning. Return the ketchup to the kettle and bring to a boil. Reduce the heat and simmer for 15 minutes. Immediately pour the ketchup into sterilized jars and seal according to manufacturer's directions.