Heat the butter in a large skillet over medium heat. Add the onions, sugar, salt, and pepper. Cook until the onions turn a rich golden brown, stirring frequently to avoid sticking, about 15 minutes. Add the broth and thyme and bring to a simmer, Immediately reduce the heat to low and cook, stirring frequently, for an additional 25 minutes or until the liquid reduces and the mixture is the consistency of thick jam. Place the marmalade in a bowl and cool to room temperature. Cover and refrigerate. (If covered and refrigerated, the marmalade should keep about 2 weeks.)