For the marinade: Combine the olive oil, garlic, thyme, and red pepper flakes in a shallow dish. Butterfly each shrimp by cutting it three-quarters of the way open down the back. Place in the marinade, turning to coat. Cover and refrigerate for about 30 minutes. For the salsa verde: Finely chop the parsley, cilantro, scallion, garlic, and salt in a food processor. With the motor running, slowly add the olive oil through the feed tube, stopping to scrape the sides once or twice, until the sauce is smooth. Add the lime juice; process until blended. For the rice: Heat the oil in a large wide saucepan or deep skillet over low heat. Add the onion; cook, stirring, until tender, about 5 minutes. Stir in the rice until well coated with the oil. Add 1¾ cups water and the salt; heat to a boil. Stir well. Cover and cook over medium-low heat until the liquid is absorbed and the rice is tender, about 15 minutes. Set aside, covered, until ready to serve. While the rice is cooking, preheat the oven to 450°F. Arrange the shrimp, butterflied side down and tails up in the air, on an oven-proof platter or in an oven-to-table gratin or baking dish. Roast until the butterflied sides of the shrimp begin to brown, about 8 minutes for jumbo shrimp, 6 minutes for extra-large shrimp. Remove from the oven; transfer the shrimp to a side dish. Stir the cooked rice into the shrimp juices on the platter or in the baking dish; sprinkle with the capers. Arrange the cooked shrimp (tails up) on the rice. Spoon a small amount of the salsa verde onto each shrimp. Garnish the dish with parsley and/or cilantro sprigs and lime wedges. Serve the remaining salsa verde on the side.