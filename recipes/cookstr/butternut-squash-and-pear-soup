Heat the butter in a large pot over medium heat until melted and bubbling. Add the onions and cook until softened and starting to turn translucent. Add the squash and pears and cook 5 minutes. Add the stock. The ingredients should be submerged in liquid. If not, add just enough water to do so. Add the rosemary, bring to a simmer, and cook until the squash and pears are very tender, about 45 minutes. Remove the rosemary sprigs. Pur√©e right in the pot with an immersion blender till smooth, or in batches in a blender. Season with salt, pepper, and sugar to taste. Place a heap of diced pear in the middle of each serving bowl, then surround with soup.