In a small sauté pan, heat the spices, except the pepper and ginger, in a tablespoon of ghee over low to medium heat until fragrant, about 2 minutes. Take off the heat and stir in the pepper, ginger, chiles, vinegar, and garlic. Cook the onion slices over medium heat in a sauté pan in the remaining ghee until translucent and then pale brown, about 15 minutes. Add the tomatoes. Simmer gently, stirring every couple of minutes to prevent sticking, until the mixture thickens, about 15 minutes. Add the sugar, more vinegar if needed, and season to taste with salt. Just before serving, add the shrimp to the hot tomato mixture and simmer for 3 minutes. Serve with basmati rice.