Sprinkle 2½ teaspoons salt and ½ teaspoon black pepper all over each chicken, including the cavity. Place a rack in a pan, put the chicken on top, and let sit for up to 24 hours, uncovered, in the refrigerator. (If you’ve brined the chicken, skip this step. Just sprinkle the bird with ½ teaspoon salt and ½ teaspoon black pepper and proceed with the rest of the recipe.) Preheat the oven to 425°F. Set an oven rack to the middle position. In a small bowl, mix the butter with half the rosemary. Using a brush, dab the butter between the skin and breast meat, taking care not to rip the skin, and spread the remaining butter allover the bird, including the cavity. In a large bowl, toss the potatoes and shallots with the remaining rosemary, 1 teaspoon salt, and ½ teaspoon pepper. Set the chicken breast side up on a rack in a large roasting pan. Scatter the potatoes and shallots underneath the chicken and the rack. Roast the chicken until the breasts are nicely browned allover, about 35 minutes. Gently flip the chicken (I like using tongs to clutch the inside of the cavity and the side of the bird) and cook until an instant-read thermometer inserted into the thickest part of the thigh registers 165°F to 170°F—this should take another 15 to 20 minutes. Transfer the chicken to a cutting board and let rest breast side up for 10 minutes. Meanwhile, toss the potatoes and shallots with the vinegar and return the pan to the oven to continue browning them, another 10 minutes, tossing again once or twice. Carve the chicken. Serve it with a drizzle of any juices accumulated on the cutting board and the shallots and potatoes.