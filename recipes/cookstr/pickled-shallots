Combine the vinegar, wine, brown sugar, peppercorns, mustard seeds, chile flakes, and salt in a medium saucepan. Stir over low heat until the sugar has dissolved. Add the shallots and bring to a boil. Reduce to a simmer and cook 5 minutes. Set aside to cool completely in the liquid. Transfer the shallots and all their liquid to a jar or plastic container. Cover tightly and store in the refrigerator up to 2 weeks.