Trim the lemongrass of its outer sheath and hard ends, whack it in a few places with the back of a knife, then cut it into 2 or 3 pieces. In a deep skillet or medium saucepan, combine the oil, onion, and garlic and tum the heat to medium. Cook a minute, stirring, then add the lemongrass, curry paste, galangal or ginger, and lime leaves. Cook, stirring, for 3 or 4 minutes, then add the stock. Bring to a boil, then reduce the heat to medium, and cook at a moderate boil for about 15 minutes. (You may prepare the recipe in advance up to this point; refrigerate in a covered container for up to 2 days.) While the broth cooks, cut the chicken breast into ½- to ¾-inch cubes. Remove the stems from the shiitakes and discard or reserve for stock; cut the caps into quarters or eighths. Add the coconut milk, then the chicken and the mushrooms to the broth. Cook for about 5 minutes, or until the chicken is done. Stir in the lime juice and nam pla; taste and adjust the seasoning. Divide among 4 bowls, then garnish with the scallions and cilantro and serve. You may remove the galangal and lemongrass before serving, or leave them in; they are delicious to gnaw on at the table.