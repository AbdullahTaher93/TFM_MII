Sift the flour, baking powder, and salt into a medium bowl. Beat the eggs in a large bowl with an electric mixer at high speed for 3 minutes. Gradually add the granulated and vanilla sugars, beating until the batter falls off the beaters in ribbons. Fold in the dry ingredients. Melt the chocolate with the butter in a double boiler over barely simmering water. Gently fold in the chocolate mixture. Refrigerate for 30 minutes. Let rest at room temperature for 15 minutes. Preheat the oven to 375 degrees F. Butter two madeleine pans (for 20-24 madeleines). Spoon the batter into the prepared pans. Bake, one pan at a time, for 10-12 minutes, or until brown and springy to the touch. Cool the madeleines in the pans for 15 minutes. Transfer to racks to cool. Dust with confectioners' sugar just before serving.