In a large nonstick frying pan, heat the oil over moderate heat. Add the shrimp, garlic, red-pepper flakes, salt, and black pepper and cook, stirring occasionally, until the shrimp are just done, about 5 minutes. Remove the shrimp with a slotted spoon. Add the fresh tomatoes, canned tomatoes, rosemary, capers, and olives to the pan. Reduce the heat and simmer, covered, for 15 minutes. Stir in the shrimp and simmer until just heated through, about 1 minute.