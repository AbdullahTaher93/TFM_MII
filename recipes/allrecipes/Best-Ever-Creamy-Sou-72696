Melt the butter in a large pot over medium heat. Add onions, and saute until tender. Meanwhile, place the broccoli and cauliflower into a large pot with at least 6 cups of water. Bring to a boil, and cook until fork tender, but broccoli is still a vibrant green. Drain, and reserve 5 cups of the water. Pour the 5 cups of reserved water into the pot with the onions. Bring to a boil, and add potatoes, spinach and bouillon cubes. Cook for about 15 minutes, until potatoes are tender. Remove half of the soup, and puree in small batches using a food processor or blender. Return to the pan, and stir in the broccoli, cauliflower, and Cheddar cheese. Stir until cheese is melted, and serve immediately.