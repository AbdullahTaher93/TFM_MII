Combine chicken broth, 1 tablespoon ginger, cilantro stems, crushed garlic, and star anise pods in a small saucepan. Bring to a boil; reduce heat to simmer. Combine water and salt in a saucepan; bring to a boil. Stir in jasmine rice. Reduce heat to low and cover; cook until rice absorbs the water, about 15 minutes. Mix chicken thighs with curry paste. Heat peanut oil in a wok or large skillet until shimmering. Add remaining 1 tablespoon ginger, chiles, shallot, and minced garlic; cook and stir until beginning to color and soften, 2 to 3 minutes. Stir in chicken and cook until no longer pink, 3 to 4 minutes. Stir in bok choy and shiitake mushrooms; cook for 3 to 4 minutes. Ladle 1 cup chicken broth mixture into a bowl; whisk in cornstarch. Pour chicken broth-cornstarch mixture into the wok. Stir in fish sauce, soy sauce, and brown sugar. Reduce heat to low and simmer until sauce thickens, 1 to 2 minutes. Thin sauce with more chicken broth if it appears too thick. Squeeze lime juice into the sauce. Serve chicken over rice, garnished with cilantro and Thai basil.