Bring the water to a boil in a saucepan; stir couscous into the boiling water and cook until couscous absorbs all the water and is cooked through, 10 to 15 minutes. Heat olive oil in a skillet over medium-low heat; cook and stir onion, shallot, and garlic in the hot oil until onion is lightly browned, 15 to 20 minutes. Stir raisins, sun-dried tomatoes, and almonds into onion mixture; cook and stir until heated through, about 5 minutes. Stir couscous into onion-raisin mixture; cook and stir until heated through, about 5 minutes. Season couscous mixture with salt and pepper; add lemon juice. Remove skillet from heat and stir butter into couscous mixture.