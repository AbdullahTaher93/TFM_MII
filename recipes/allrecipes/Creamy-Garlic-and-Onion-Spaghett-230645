Melt butter with olive oil in a saucepan over low heat. Stir onions, garlic, sugar, and salt into the hot butter and oil. Cover pan and cook until onions are soft and translucent, stirring occasionally, about 20 minutes. Meanwhile, bring a large pot of lightly salted water to a boil. Cook spaghetti in the boiling water, stirring occasionally until cooked through but firm to the bite, about 7 minutes. Drain and keep warm. Pour Chardonnay into onion mixture and bring to a boil; reduce heat to low and simmer until evaporated, 2 to 3 minutes. Stir heavy cream into mixture and simmer until slightly thickened, about 2 minutes. Transfer spaghetti to a serving bowl and pour onion sauce over pasta; sprinkle with Parmesan cheese and black pepper. Toss to coat.