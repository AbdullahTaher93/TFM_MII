In a large heavy pot, heat both oils over moderate heat. Add the onion, celery, garlic, ginger, chili powder, and red-pepper flakes. Cook, stirring occasionally, for 5 minutes. Add the broth, tomatoes, chicken, fish sauce, cilantro leaves, if using, and the salt and bring to a simmer. Reduce the heat and simmer, covered, until the chicken is just done, about 15 minutes. Remove the chicken; when it is cool enough to handle, cut it into bite-size pieces. Continue cooking the soup for 15 minutes longer. Meanwhile, in a large pot of boiling, salted water, cook the spaghettini until just done, about 9 minutes. Drain and add the pasta and the chicken to the soup. Add the bok choy; bring back to a simmer. Cook until just done, about 1 minute. Stir in the lime juice and chopped cilantro, if using.