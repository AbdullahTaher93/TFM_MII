Heat the butter in a saucepan over medium-high heat; cook and stir the yellow and red onion, shallots, garlic, tomato, carrots, and mushrooms until the onions are translucent and the carrots have softened, 10 to 15 minutes. Pour in the beef broth and 1 cup of Merlot, and bring to a boil, scraping and dissolving any browned bits of flavor from the bottom of the pan. Reduce heat, and simmer until the vegetables are very soft and the pan juices have reduced by half, about 20 minutes. Strain out and discard the vegetables from the sauce. Return the sauce to a boil over medium-high heat, stir in 1/4 cup of Merlot wine, and reduce heat. Simmer the sauce until it is reduced to 1/4 of its original volume, stirring occasionally, about 20 minutes.