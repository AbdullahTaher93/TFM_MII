Heat the oil in a large, heavy stockpot over medium-low heat. Coat the onions, carrots and fennel with flour and saute in the oil until golden brown. Add the cinnamon stick, cumin, ginger, saffron, potatoes, vegetable broth and raisins; cook about 10 minutes. Add garbanzo beans, squash, marjoram and tomatoes; cover and simmer until squash is tender, about 8 minutes longer. Transfer ragout to a serving dish and sprinkle with toasted almonds, if desired. Serve with grilled pita or other flatbread.