Wash crabs and separate claws from body. Crack the shell and cut the body into 4 to 6 pieces. In a large bowl, mix together ketchup, water, cornstarch, and soy sauce. Heat skillet and the oil, stir in garlic and shallots. Fry the garlic and shallots for 1 to 2 minutes before adding the chili. Fry another 2 minutes. Add crab pieces and fry until they turn red, about 4 minutes. Stir sauce mixture into the skillet until the crabs are well coated. Cover the skillet and let simmer on high heat, for 7 minutes or until the shells turn bright red. Remove cover and stir in the lime juice. Stir in beaten egg until it is fully cooked. Turn the heat off and stir in green onions.