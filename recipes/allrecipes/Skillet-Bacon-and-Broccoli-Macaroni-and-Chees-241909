Preheat oven to 350 degrees F (175 degrees C). Prepare macaroni and cheese according to package instructions. Brown bacon pieces in a large, oven-proof skillet over medium heat. Remove with a slotted spoon. Pour off all but 1 tablespoon of bacon grease. Saute shallots in skillet over medium heat until translucent. Return cooked bacon to skillet; stir in broccoli. Add the prepared macaroni and cheese and stir to combine. Combine topping ingredients in a small bowl and sprinkle over the top of the macaroni and cheese. Bake until topping is lightly browned, 15 to 20 minutes. Serve immediately.