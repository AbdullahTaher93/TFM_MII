In a large bowl, stir together the curry, ginger, garlic, red pepper flakes, salt, pepper, and thyme. Place the chicken in the bowl, and coat evenly with seasoning. Cover, and marinate for 2 hours or more. Preheat oven to 400 degrees F (200 degrees C). In a large bowl, stir together rice, mango, onion, garlic, and ginger. Season with curry, red pepper flakes, salt, thyme, allspice berries, and brown sugar. Stir in water, broth, and lime juice. Pour into a casserole dish, and arrange the marinated chicken on top. Then pour coconut milk over the top. Cover with aluminum foil. Bake in preheated oven for 1 hour. Remove foil, and cook 10 to 15 minutes more. Remove allspice berries before serving.