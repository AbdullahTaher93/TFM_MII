In a medium bowl, soak the noodles in cold water for 15 min; drain. Cover noodles with hot water, and soak for 15 minutes; drain. Rinse with cold water, drain, and set aside. Heat oil in a wok or large heavy skillet over medium heat. Saute onion and garlic until onion is soft and translucent, about 5 minutes. Add shrimp, and cook until pink. Stir in ketchup, fish sauce, sugar, lemon juice and vinegar. Pour in the beaten egg, and cook without stirring until egg is partially set. Add drained noodles, 1/4 pound bean sprouts, and 1/2 cup peanuts. Mix while cooking until noodles are tender.