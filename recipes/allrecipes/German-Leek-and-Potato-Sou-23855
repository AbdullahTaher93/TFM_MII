In a large pot over medium heat, cook onions in butter until translucent. Stir in leeks, potatoes, water, thyme and the ham bone. Bring to a boil, then reduce heat, cover and simmer until potatoes are tender, 20 to 30 minutes. Remove ham bone and puree soup with a blender or food processor. Return to pot, stir in cream, salt and pepper, heat through and serve.