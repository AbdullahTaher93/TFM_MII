Heat oil in a 12-inch skillet (not nonstick) over medium heat. Add onions and sugar. Cover and cook, stirring occasionally, until onions are soft and most of their liquid has evaporated, 10 to 20 minutes. Uncover and cook, stirring, until onions turn deep golden, 10 to 20 minutes more. (Add 1 or 2 tablespoons water if the onions start to scorch.) Add garlic and rosemary; cook, stirring, until fragrant, about 1 minute. Add 1/4 cup vinegar and cook until most of the liquid has evaporated, about 3 minutes. Season with salt, pepper and more vinegar, if desired.