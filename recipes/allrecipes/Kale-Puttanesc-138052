Bring a large pot of lightly salted water to a boil. Add pasta and cook for 8 to 10 minutes or until al dente; drain. Meanwhile, heat olive oil in a large skillet over medium-high heat. Add onions, garlic, and red pepper flakes. Cook and stir until the onion has softened and begun to turn golden brown, about 5 minutes. Stir in capers, anchovy fillets, and diced tomatoes, and bring to a simmer. Stir in kale, and simmer over medium-low heat until wilted and tender, about 10 minutes. Once the pasta has cooked and been drained, stir into the puttanesca along with the black olives. Toss and sprinkle with grated Parmesan cheese before serving.