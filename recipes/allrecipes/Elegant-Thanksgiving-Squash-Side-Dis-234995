Melt butter in a large pot over medium-high heat. Cook and stir onion in hot butter until translucent and soft, 5 to 10 minutes. Stir butternut squash, apples, and 1 cup water into onion mixture. Bring to a boil; reduce heat to low and simmer until apples are tender, 10 to 15 minutes. Pour squash mixture into a blender no more than half full. Cover and hold lid down; pulse a few times before leaving on to blend. Puree in batches until smooth. Transfer puree to a bowl and season with salt and pepper to taste. Stir wine, cranberry juice, and 1/2 cup water together in a saucepan. Bring wine mixture to a boil; add mulling spices, reduce heat to low, and simmer for 2 minutes. Add raisins and simmer until plumped, 5 to 10 minutes. Drain and discard wine mixture. Stir raisins into squash puree and top with goat cheese.