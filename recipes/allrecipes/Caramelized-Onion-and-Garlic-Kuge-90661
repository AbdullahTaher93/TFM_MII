In an 11- to 12-inch nonstick frying pan over medium heat, melt 3 tablespoons of the margarine. Turn the heat to medium low and stir in the red, white, and yellow onions and garlic to coat. Cook, uncovered, for 45 minutes, stirring occasionally, until onions are translucent. Turn the heat to medium high. Cook an additional 15 minutes, until onions are browned around the edges. Remove from heat to cool to room temperature. (Cooked onions can be refrigerated for up to 48 hours in an airtight container.) While the onions are cooking, peel the potatoes. Shred them using the medium shredding blade of a food processor, or the medium section of a hand grater. Drain the potatoes well in a colander, pressing excess liquid out with your hands. In a very large mixing bowl, using your hands, mix the potatoes with the lemon juice to prevent the potatoes from turning brown. Place oven rack in middle position in your oven and preheat oven to 400 degrees F. Liberally oil two 8- by 8- by 2-inch glass or metal pans with 1 tablespoon margarine each. Melt the remaining 4 tablespoons margarine in the frying pan. Gently fold the cooled onion mixture and the melted margarine into the potato mixture. In a 2-quart mixing bowl, whisk the eggs, salt, pepper, and matzo meal. Using your hands, evenly fold this into the potato mixture. Put half of the mixture into each of the prepared pans and pat to even out the surface. Cover with tented aluminum foil. Bake, covered, for 1 hour. Increase temperature to 425 degrees F, uncover the kugels, and bake for an additional 30 minutes until top of each kugel is lightly browned. Remove from the oven to cool for at least 10 minutes before serving. Or cool completely and refrigerate.