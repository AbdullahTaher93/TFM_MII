Heat butter in a large skillet over medium heat. Cook and stir onion, bacon, and garlic until bacon is crisp, 5 to 7 minutes. Whisk flour, salt, and black pepper into onion mixture until blended and the flour and drippings form a paste, 1 to 2 minutes. Slowly whisk milk into onion mixture. Bring to a boil, continuously whisking, until sauce is thick and creamy, 3 to 5 minutes. Stir spinach and half-and-half into sauce; cook until spinach is heated through, 4 to 6 minutes.