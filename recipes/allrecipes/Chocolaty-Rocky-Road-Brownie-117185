In a microwave or heavy saucepan, melt chocolate and butter; stir until smooth. In a large mixing bowl, combine the sugar, eggs, vanilla and chocolate mixture. Add flour; mix well. Stir in peanuts. Spread into a greased 13-in. x 9-in. x 2-in. baking pan. Bake at 350 degrees F for 20-25 minutes or until brownies begin to pull away from sides of pan. Cool on a wire rack. In a saucepan, combine the butter, cream cheese, chocolate and milk. Cook over medium heat until melted, stirring occasionally. Remove from the heat; stir in confectioners' sugar and vanilla. Transfer to a large mixing bowl; beat until smooth. Stir in marshmallows and peanuts. Immediately spread over brownies. Store in the refrigerator.