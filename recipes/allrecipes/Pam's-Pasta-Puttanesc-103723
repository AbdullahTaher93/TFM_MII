Bring a large pot of lightly salted water to a boil. Add spaghetti and cook for 8 to 10 minutes or until al dente; drain. Meanwhile place oil, onion, garlic, pepper flakes, and anchovies in a large skillet. Turn heat to medium-high and cook until onions are softened and garlic starts to turn golden, 3 to 4 minutes. Add tomatoes, capers, and olives, bring to a simmer, reduce heat to low, and cook to blend flavors, about 10 minutes. Pour about 2/3 of the sauce over pasta; toss to coat. Transfer a portion of pasta to each plate, topping each with a little more sauce.