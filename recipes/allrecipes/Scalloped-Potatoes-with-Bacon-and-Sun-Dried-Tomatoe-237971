Preheat oven to 375 degrees F (190 degrees C). Rub garlic over inside of an 8-inch (2L) square baking dish. Set aside. In a large saucepan, melt butter over medium heat. Stir in salt, thyme and pepper and cook for 30 seconds. Whisk in flour; cook, stirring, for 1 minute. Whisk in cream. Add potatoes; stir and bring to a boil. Reduce heat; simmer, stirring occasionally, for 5 minutes. Pour half of the mixture into prepared dish. Stir onion with bacon and tomatoes. Sprinkle 3/4 of the onion mixture over potatoes. Pour in remaining potato mixture. Sprinkle with remaining onion mixture and cheese. Set on baking tray to catch any drips. Bake until the top is golden and potatoes are tender, 40 to 45 minutes. Cool for 10 minutes before serving.