Heat butter in a large skillet over medium-high heat; saute onion until tender, about 5 minutes. Add beef broth, tomatoes, rice, parsley, garlic, salt, thyme, black pepper, cayenne pepper, chili powder, and bay leaf; cover skillet, reduce heat, and simmer until rice is tender and flavors blend, about 40 minutes. Mix shrimp and ham into rice mixture and simmer until shrimp is cooked through, 5 to 10 minutes. Remove bay leaf.