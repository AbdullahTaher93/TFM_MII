Preheat oven to 350 degrees F (175 degrees C). Bring a large pot of lightly salted water to a boil. Cook broccoli in the boiling water until tender yet firm to the bite, 1 to 3 minutes; drain. Combine broccoli, mayonnaise, eggs, onion, salt, and pepper together in a casserole dish. Melt margarine in a saucepan over medium-low heat; stir in flour until mixed. Add milk slowly, stirring to prevent lumps. Cook and stir until sauce thickens, 8 to 10 minutes. Pour sauce over broccoli mixture; mix together. Bake in the preheated oven until the sauce is bubbly and the top is golden brown, about 30 minutes. Sprinkle Cheddar cheese on top and bake until cheese is melted, about 15 minutes.