Preheat oven to 350 degrees F (175 degrees C). Pour enough water into a baking dish to be about 3/4-inch deep. Lie squash halves into the water with the cut side facing up. Roast in preheated oven until a fork easily pierces through the flesh, 45 to 50 minutes; Remove from oven and flip squash; let cool enough to handle. Melt butter in a large pot over medium heat. Saute shallots in hot butter until softened, 5 to 7 minutes. Pour 3 to 5 cups chicken stock into the pot; stir. Add apples to the stock; bring to a boil, reduce heat to medium-low, and simmer until the apples are tender, 20 to 30 minutes. Use a fork to scrape the flesh from the butternut squash, finishing with a spoon to get the last bits away from the skin; add to the simmering stock. Add remaining 3 cups stock to the pot, bring mixture to a simmer, and continue to cook until everything is heated through, 5 to 10 minutes. Puree soup with an immersion blender until smooth.