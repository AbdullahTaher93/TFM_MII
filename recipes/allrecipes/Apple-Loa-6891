Preheat oven to 350 degrees F (175 degrees C). Grease one 9x5 inch loaf pan. Mix together flour, baking powder, soda, salt and nuts. In a large bowl, beat margarine, sugar and 1 egg until smooth. Beat in second egg, and stir in vanilla. Stir in shredded apples. Pour flour mixture into batter; stir just until moistened. Spread into prepared pan. Bake for 50 to 60 minutes, or until an inserted toothpick comes out clean. Let stand 10 minutes, then remove from pan. Place on a rack to cool.