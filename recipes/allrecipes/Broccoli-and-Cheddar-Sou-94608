Melt butter over medium heat in a stockpot. Cook onion in butter until softened. Add garlic and pepper; cook for 1 minute then stir in broccoli, and stir in chicken broth. Bring to a boil and simmer until broccoli is tender, 10 to 15 minutes. Meanwhile whisk flour into milk until dissolved. Stir into soup stirring frequently until thickened. Reduce heat, and stir in cheese until melted and heated through. Season with salt to taste.