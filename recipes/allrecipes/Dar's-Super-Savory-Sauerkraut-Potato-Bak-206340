Preheat an oven to 350 degrees F (175 degrees C). Grease a 9x13-inch baking dish. Whisk the flour, bouillon granules, water, and milk together in a medium saucepan; bring to a boil until thick, 1 to 2 minutes, whisking continuously. Remove from heat and stir the sour cream into the flour mixture; set aside to cool. Combine the onion, Cheddar cheese, sauerkraut, salt, pepper, and caraway seeds in a large mixing bowl. Stir the sour cream sauce and the melted butter into the sauerkraut mixture; fold the hash brown potatoes into the mixture. Pour into the prepared baking dish. Use a spatula to flatten into an even layer. Bake in the preheated oven until the potatoes are tender and the top is brown and bubbly, 60 to 70 minutes.