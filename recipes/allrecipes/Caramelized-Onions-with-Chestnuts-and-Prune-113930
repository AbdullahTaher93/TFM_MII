Bring a large saucepan of water to a boil. Add the onions and blanch for 30 seconds. Drain in a colander under cold running water. Slip off the papery skins and pat the onions dry. In a large, deep skillet, combine the chicken stock with the water, butter, vinegar and sugar. Cover and bring to a boil. Add the onions, cover and cook over moderately low heat until crisp-tender, about 15 minutes. Uncover and cook over moderate heat, stirring occasionally, until the onions are covered with a deep-golden caramel, about 30 minutes longer; add a few tablespoons of water as the liquid evaporates. Add the Cognac, prunes and chestnuts to the onions and cook just until heated through. Season with salt and pepper and transfer to a serving bowl. Add 2 tablespoons of water to the skillet and scrape up any caramel stuck to the bottom and sides. Pour the sauce over the onions, garnish with the parsley and serve.