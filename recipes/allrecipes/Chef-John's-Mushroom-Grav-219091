Heat butter over medium heat in a saucepan until it foams. Stir in mushrooms. Season with salt. Simmer until liquid evaporates, about 20 minutes. Stir in the flour, cooking and stirring for about 5 minutes. Add about 1 cup of beef stock, stirring briskly until incorporated, then pour in the remaining stock and mix thoroughly. Season with black pepper and thyme. Reduce heat to medium-low, and simmer until thickened, about 30 minutes, stirring often.