Heat oil in a large skillet over medium heat. Add onion; cook and stir until soft and browned, about 10 minutes. Add lentils, tomatoes, barbeque sauce, ketchup, miso paste, shiitake mushrooms, allspice, and garlic; cook and stir until flavors combine and mixture thickens, 20 to 25 minutes.