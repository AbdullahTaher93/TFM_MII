In a medium bowl, cream together the butter and cream cheese. Stir in the flour until well blended. Wrap dough in plastic wrap and refrigerate for at least one hour. Preheat oven to 350 degrees F (175 degrees C). Melt chocolate and margarine together in the microwave, stirring frequently until smooth. Beat in the brown sugar, egg and vanilla until well blended. Stir in the pecans. Roll the chilled dough into 1 inch balls and press them into the bottom and up the sides of ungreased mini muffin tins. Spoon about 1 teaspoon of filling into each cup. Bake for 20 minutes in the preheated oven, until edges are browned. Cool in pans on wire racks for 15 minutes before removing from muffin tins.