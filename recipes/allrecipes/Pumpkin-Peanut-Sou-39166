MELT butter in large saucepan over medium-high heat. Add onion, shallots and garlic; cook, stirring occasionally, for 3 to 5 minutes or until tender. Stir in marjoram and thyme; cook for 1 minute. Stir in broth and pumpkin; bring to a boil. Reduce heat to low; cover. Cook, stirring occasionally, for 15 to 20 minutes. Remove from heat; stir in milk and peanut butter. TRANSFER mixture to blender or food processor (in batches, if necessary); cover. Blend until smooth. Return to saucepan. Cook over medium heat, stirring occasionally, for 5 minutes or until heated through.