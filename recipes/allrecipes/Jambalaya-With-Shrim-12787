In a large saucepan, melt butter over low heat. Stir in flour until smooth. Stir in onions, garlic, and ham; cook and stir until onion is soft. Stir in tomatoes, and cook for 5 minutes. Mix in oregano, rice, and broth. Cover, and simmer until just a little liquid remains. Add shrimp, and stir to evenly distribute. Cook for 8 minutes, or until rice is cooked and shrimp turns pink.