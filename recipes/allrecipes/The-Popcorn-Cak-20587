Line a 10 inch tube pan or other 12 cup pan with aluminum foil. In a very large bowl, combine popcorn, chocolate chips and peanuts and mix well. In a medium saucepan over low heat, melt margarine. Stir in peanut butter. Stir in marshmallows and continue stirring until marshmallows melt and the mixture is smooth. Remove from the heat. Stir marshmallow mixture into popcorn mixture until well coated. Press mixture into prepared pan. Allow to cool completely before removing and cutting into slices to serve.