Preheat oven to 425 degrees F (220 degrees C). Bake the pumpkin on a baking sheet in the preheated oven until soft, 30 to 40 minutes. Combine 2 cups chicken broth and chile peppers in a saucepan over medium-low heat; simmer for 30 minutes. Melt butter in a large stockpot over medium heat. Cook and stir onion in the butter until caramelized, about 45 minutes. Transfer to a bowl. Cook leeks in the same stockpot until tender, 10 to 15 minutes. Add pumpkin, chicken broth with chile peppers, caramelized onion, remaining 3 cups chicken broth, and cumin. Simmer until flavors combine, about 5 minutes. Puree soup with an immersion blender until smooth. Add bay leaf, salt, and pepper. Remove from heat; stir in buttermilk. Discard bay leaf before serving.