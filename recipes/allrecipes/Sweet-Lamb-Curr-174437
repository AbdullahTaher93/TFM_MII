Place the flour in a plastic bag; season to taste with salt and pepper. Add the lamb, and shake until evenly coated with flour. Melt half of the butter in a large pot over medium-high heat. Cook the lamb in batches until golden brown on all sides, about 5 minutes per batch; set aside. Reduce heat to medium and add the remaining butter. Stir in the onions, and cook until the onions have softened and turned translucent, about 5 minutes. Stir in the brown sugar, curry powder, apples, chicken stock, raisins, and browned lamb. Bring to a boil over medium-high heat, then reduce heat to medium-low, cover, and simmer until the lamb is very tender, 1 to 1 1/2 hours. Stir in the lemon juice and cook 2 minutes before serving.