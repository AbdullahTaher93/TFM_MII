Preheat the oven to 375 degrees F (190 degrees C). Combine spinach artichoke dip and ricotta cheese in a bowl. Stir in egg, lemon juice, red pepper flakes, salt, and pepper; mix until well-combined. Set aside. Bring white sauce to a simmer over medium-low heat. Stir in grated Gruyere cheese until cheese is melted and incorporated into sauce, 1 to 2 minutes. Set aside. Fill a large pot with lightly salted water and bring to a boil. Stir in shells and return to a boil. Cook pasta uncovered, stirring occasionally, until cooked through, but still firm to the bite, about 11 minutes; drain. Set aside. Pour half the white sauce mixture into the bottom of a 9x13-inch casserole dish; spread evenly. Stuff pasta shells with the spinach artichoke mixture and place in casserole dish atop the white sauce, stuffed-side up. Pour remaining white sauce over the tops of the shells and sprinkle with Parmigiano-Reggiano cheese. Bake in the preheated oven until golden brown and bubbling, about 25 minutes.