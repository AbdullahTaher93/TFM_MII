Melt the butter or margarine in a large saucepan over medium heat. Add the onions and saute for 10 minutes, or until onions become caramelized. Add the garlic, thyme, salt, brown sugar and 2 cups red wine. Stir well, bring to a boil and continue to heat until soup has reduced by half. Add the remaining 2 cups red wine and the parsley. Reduce heat to low, cover and simmer for 20 minutes.