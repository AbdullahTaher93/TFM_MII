Melt the butter in a large skillet over medium heat, and saute onion, shallot, and garlic until lightly browned. Stir in tomato paste. Pour in the wine, and stir, scraping up browned bits from the bottom of the skillet. Bring to a boil, and cook about 1 minute. Mix in soy sauce, bay leaf, and thyme. Reduce heat to low, and place tofu, tomato, and mushrooms into the mixture. Cover, and simmer 15 to 20 minutes, until sauce is thickened.