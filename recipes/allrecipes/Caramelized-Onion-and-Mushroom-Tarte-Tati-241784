Melt butter in a saucepan over medium-low heat; cook and stir onion in hot butter until soft and caramelized, 30 to 60 minutes. Heat olive oil in a skillet over medium-high heat; cook and stir mushrooms until browned and tender yet crisp, about 10 minutes. Season with salt and pepper. Preheat oven to 400 degrees F (200 degrees C). Roll puff pastry out on a lightly-floured work surface. Cut out 5-inch circles using a round cutter and place on a baking sheet. Bake in the preheated oven until lightly browned and puffed, about 12 minutes. Transfer puffs to a wire rack to cool completely. Beat goat cheese and egg together in a bowl until smooth. Season with thyme. Spread goat cheese mixture over cooled pastry puffs; top each with caramelized onions and mushrooms. Place pastries back onto baking sheet. Bake in the oven until warmed through, about 5 minutes.