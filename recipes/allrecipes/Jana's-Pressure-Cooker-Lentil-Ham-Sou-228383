Place ham shanks and water in pressure cooker over medium heat. Cover and lock; bring to 15 pounds of pressure, reduce heat to low, and cook for 20 minutes. Release pressure immediately using method recommended by the manufacturer. Remove cooked ham shanks with a slotted spoon; transfer to a bowl to cool. Separate meat from bone. Transfer ham broth to a separate bowl for later use. Heat olive oil in the pressure cooker over medium heat; cook and stir onion, carrots, celery, and garlic until tender and reduced, about 20 minutes. Add lentils, 8 cups ham broth, thyme, and bay leaf; cover and lock. Bring pressure up to 15 pounds for 6 minutes; immediately release pressure. Stir tomatoes, ham, black pepper, and vinegar into soup over low heat until heated through.