Preheat oven to 450 degrees F. Place walnuts in a pie plate and toast in the oven 5 minutes, or until fragrant. Transfer to a small bowl. Heat oil in a large nonstick skillet over medium-low heat. Add shallots and cook, stirring often, until deep golden brown, about 10 minutes. (Add a tablespoon or two of water if the mixture gets too dry.) Season with salt and pepper. Meanwhile, cook broccoli in boiling salted water until just tender, 3 to 5 minutes. Drain the broccoli and add to the shallots in the skillet; toss to combine. Taste and adjust seasonings. Transfer to a serving bowl and sprinkle with the toasted walnuts.