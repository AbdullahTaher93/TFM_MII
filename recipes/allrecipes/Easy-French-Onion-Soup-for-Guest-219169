Melt butter in a large skillet over low heat. Cook onions with salt, stirring occasionally, until the onions are soft and golden, about 40 to 45 minutes. Mix in thyme sprigs and bay leaf. Pour in sherry wine and sherry vinegar, and stir in black pepper. Pour in beef broth, chicken broth, and water. Stir to combine, and allow the soup to simmer gently for one hour. Ladle soup into heat-proof crocks. Place a slice of toasted baguette on top of each crock, and sprinkle 1 ounce of shredded Gruyere cheese per serving. Preheat oven's broiler and set the oven rack about 6 inches from the heat source. Place the filled crocks on a baking sheet, and broil until the cheese is golden and bubbly, about 1 minute.