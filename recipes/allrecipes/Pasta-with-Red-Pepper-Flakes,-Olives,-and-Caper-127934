Bring a large pot of salted water to a boil over high heat. Add the pasta and cook according to package directions. Meanwhile, in a large skillet, heat the oil over medium-high heat. Add the garlic, anchovies, and red-pepper flakes. Cook, stirring often, until the garlic is fragrant and the anchovies are softened, 2 to 3 minutes. Stir in the olives, capers, and tomatoes. Reduce the heat to low and simmer, stirring often, until the sauce is slightly thickened, about 8 minutes. Drain the pasta and reserve 1/2 cup of the cooking water. Transfer the pasta to the skillet, add the parsley, and toss. Add some of the cooking water if the pasta appears to be dry. Season with salt and pepper, and serve with the grated Parmesan on the side.