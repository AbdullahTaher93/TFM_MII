Bring the barley and water to a boil in a pot. Cover, reduce heat to low, and simmer 30 minutes, or until tender. Heat the olive oil in a large pot over medium heat, and cook the onion and garlic until tender. Season with rosemary. Mix the mushrooms, yellow bell pepper, and wine into the pot, and cook 5 minutes. Stir in the cooked barley, beans, tomatoes, and spinach. Season with red pepper flakes. Continue cooking 10 minutes, or until spinach is wilted.