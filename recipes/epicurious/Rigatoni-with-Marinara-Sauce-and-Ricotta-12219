If using fresh tomatoes, cut a shallow X in bottom of each with a paring knife and blanch tomatoes in 3 batches in a large pot of boiling water, 1 minute per batch. Transfer blanched tomatoes with a slotted spoon to a cutting board and, when cool enough to handle, peel, beginning from scored end, with knife, then halve lengthwise and seed. Chop tomatoes (fresh or canned), reserving juice (from cutting board or can). Cook garlic and red pepper flakes in oil in a 4-quart heavy pot over medium heat, stirring, until garlic is golden, about 5 minutes. Discard garlic, then add tomatoes with their juice and 1 1/4 tsp salt and simmer, uncovered, until sauce is thickened, about 20 minutes. Remove from heat and stir in basil and salt to taste. Cook rigatoni in boiling salted water, uncovered, until al dente, then drain. Toss pasta with warm marinara sauce in a large bowl. Serve with ricotta and grated Pecorino.