Preheat oven to 350°F. Lightly coat an 8-by-8–inch baking dish with nonstick spray, then line with 2 sheets of parchment, leaving overhang on all sides. Bring dates and 1 cup water to a boil in a small saucepan. Reduce heat and simmer until liquid is almost completely evaporated. Let cool. Meanwhile, pulse whole wheat flour, oats, salt, baking powder, and 1 cup almonds in a food processor until almonds are very finely ground, about 1 minute. Add oil, butter, coconut sugar, and 2 Tbsp. agave and pulse to combine. Pulse in sweetened shredded coconut. Transfer coconut-oat mixture to baking dish and pack evenly across bottom of dish, tamping and smoothing with the bottom of a dry measuring cup (the more compact it is, the better it will hold together when baked).Pulse dates, lime zest, and lime juice in food processor, scraping down sides as needed, until smooth. Spread date purée evenly over coconut-oat mixture, leaving a 1/2-inch border around edges.Chop remaining 1/4 cup almonds and mix in a small bowl with unsweetened coconut flakes, unsweetened shredded coconut, and remaining 2 tsp. agave. Scatter evenly over date purée and press in lightly with your hands. Bake until top and bottom are browned and edges are very firm, 40–45 minutes. Let cool before cutting into eight rectangles. Bars can be baked 3 days ahead. Store airtight at room temperature.