Melt the butter in a pan over a medium heat. Add the shallots and garlic and fry until softened but not coloured.Add the rice, stir well and cook for 1-2 minutes, or until the rice is slightly translucent.Add the white wine and stir well until the wine is almost completely absorbed.Add a ladleful of stock and allow the rice to absorb this liquid, stirring constantly. Add further ladlefuls of stock, stirring and allowing the rice to absorb almost all of the stock before adding the each ladleful.Once all the stock has been added and absorbed, add the mushrooms and stir well.Once the rice is cooked, but slightly al dente, add an extra knob of butter and the parmesan and stir well.Season, to taste, with salt and freshly ground black pepper, then spoon into warmed dishes and serve immediately.