Heat a large saucepan over a high heat, add the butter and melt without browning. Add the onions and fry gently for five minutes, stirring frequently. Season with half a teaspoon of salt and a couple of pinches of pepper.Continue to cook the onions over a medium heat for 20-30 minutes, or until they are an even, rich brown caramel colour. Stir every 2-3 minutes so they don’t burn.  Be patient! It will take about 20 minutes to get the onions to the colour that will give the best flavour to the soup.  Once cooked, stir the flour into the caramelised onions and mix well.Stir in 200ml/7fl oz stock and whisk well to create a thick sauce and scrape up any tasty sticky bits from the bottom of the pan. Add the remaining stock, whisking as you add and bring to the boil, skimming off any foam on the surface.  Then reduce the heat and simmer for 15 minutes. Taste and season with salt and pepper as necessary.Meanwhile, heat the grill to hot. Arrange the sliced baguette on a baking tray and sprinkle two-thirds of the grated cheese over them. Place under the hot grill for 3-4 minutes, or until the cheese is melted and browned.Serve the hot soup in bowl with the Gruyère croutons floating on top. Sprinkle over the remaining gruyere and serve immediately.