Preheat the oven to 160C/140C Fan/Gas 3.Start by preparing the vegetables for stuffing. Cut the tops off the peppers and tomatoes to create lids, set the tops aside. Scoop out the pepper seeds and discard. Scoop out the tomato flesh and seeds and reserve. Cut the aubergines and courgettes lengthways and scoop out the seeds and flesh inside, leaving a boat-shaped shell ready to fill. Add the flesh from the courgettes and aubergines to the tomato flesh and seeds and chop well.In a large pan over a medium heat, warm 3 tablespoons of the olive oil and fry the onion and garlic for 3–5 minutes until soft. Add the chopped vegetable flesh and the tomato purée. Cook for about 10 minutes until softened.Add the rice and 150ml/5fl oz of the vegetable stock, raise to a simmer and and cook for 10 minutes, stirring occasionally. Season with salt and pepper and stir in the herbs and chilli flakes.Arrange the vegetable shells on a roasting tin or ovenproof dish and spoon the rice mixture into them. Place the lids on the peppers and tomatoes and drizzle them all with the remaining olive oil.Pour the remaining stock into the tin, cover with foil and bake for 1 hour. Remove the foil and bake for another 15–30 minutes until the vegetables and rice are cooked.Serve hot, warm or cold.