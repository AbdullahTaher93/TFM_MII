For the puff pastry, put the flour and salt in a large mixing bowl. Add 200ml/7fl oz water. Mix to combine and then tip out onto a floured work surface. Briefly knead to form a rough, but evenly combined, dough.  Put the pastry in the fridge to rest for 1-2 hours.Meanwhile, make the pie filling. Heat a lidded casserole or a large ovenproof pan over a high heat and add the oil. Once hot, fry the steak for 3-4 minutes, or until golden-brown on all sides (you may need to do this in batches). Add the kidneys and cook for 2 minutes. Transfer the meat to a warm plate and set aside.Add the onion, mushrooms, whole shallots and carrots to the empty casserole and fry for 2-3 minutes, or until just softened. Add the thyme, bay leaves and tomato purée and stir well to combine.Add the ale and stir well, scraping any sediment up from the bottom of the casserole using a wooden spoon. Return the meat to the casserole, add the hot stock, stir well and bring the mixture to the boil. Turn down the heat, place a lid on the casserole and cook for 1½ hours, or until the beef is tender and the gravy has thickened. Once cooked, remove the pie filling from the dish and set aside to cool.Remove the puff pastry from the fridge and place on a lightly floured work surface. Roll the pastry out into a rectangle approximately 50x30cm/20x12in. Slice the butter and lay this over two-thirds of the dough. Fold the unbuttered dough third over the buttered one, then flip that over the remaining buttered third so that the butter is wrapped inside the dough. Take a rolling pin and lightly roll the upper surface of the dough to press out any air bubbles. Seal the edges with a sharp whack of the rolling pin.Turn the pastry by 90 degrees (a quarter turn) and fold the bottom third of the pastry up, then the top third down. Roll the pastry out towards the folded edges until it measures roughly 60x25cm/23x10in, then fold the pastry in by thirds again. Give the pastry a further two turns. Wrap the pastry in cling film and transfer to the fridge to chill for 30 minutes.To cook the pie, preheat the oven to 220C/200C Fan/Gas 7.Put the beef and gravy mixture in a 23cm/9in diameter round ovenproof dish. Roll out the pastry to 1cm/⅓in thickness and cut the pastry into a circle slightly bigger than the pie dish. Brush a little water around the rim of the pie dish, then place the pastry over the filling and press the edges to seal the pastry to the dish. Brush the pie with a little beaten egg, put the pie in the oven and cook for 20-30 minutes, or until the pastry is pale golden-brown and has risen.Meanwhile, for the mashed potatoes boil the potatoes in salted water for 15 minutes, or until tender. Drain and put the potatoes back in the saucepan over the heat to remove excess moisture. Mash the potatoes. Heat the butter and cream in a saucepan until the butter is melted. Add to the mash and beat well until soft and creamy. Season with salt and pepper.Boil the peas for 2-3 minutes and then drain.To serve, put a spoonful of the pie on each plate with the mash and peas alongside.