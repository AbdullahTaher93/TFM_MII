Preheat the oven to 190C/375F/Gas 5.Place the onion, butter, oil, thyme, bay leaves, salt and sugar in a heavy-based saucepan and cook over a medium heat for 40 minutes, stirring from time to time. The onions should be golden and soft.Stir in the flour and cook over a low heat for a further 10 minutes.Pour in the wine, stir to combine, and cook for 10 minutes.Add the stock and cook over a medium heat for a further 20 minutes. The soup can be prepared up to 48 hours ahead up to this point.Scatter a little cheese (don't use it all) over the bottom of a large oven-proof tureen or 6-8 oven-proof soup bowls placed on a baking sheet.Pour in the soup. Rub the toast slices with the garlic clove and float on the top of soup.Top with the remaining cheese and place in the oven until bubbling and golden brown, about 20 minutes from hot or 40 minutes from cold.Beat together the egg yolks, cream, brandy and Madeira. When the soup is ready to serve, lift the cheesy crust and pour cream mixture into the soup, or serve in a jug and offer separately to your guests.