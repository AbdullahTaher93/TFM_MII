If the coconut milk has divided into two parts (watery and thick), separate it by carefully spooning off the thick part and pouring the watery part into a small jug; set both aside.Heat a wok or a large wide pan over a medium heat until hot, add the oil and the thick part of the coconut milk (if the coconut milk has not separated into two parts, add all the coconut milk at this stage).Stir this over a medium heat until the coconut milk starts to separate and thicken.Add the curry paste and peanut butter and mix to combine. Then add the stock, fish sauce and brown sugar and bring to the boil.Place the noodles in a bowl and cover with boiling water. Leave for five minutes to soften, then drain.Meanwhile add the baby sweetcorn and broccoli to the wok or pan and cook, uncovered for one minute. Add the mangetout and spring onion, and cook for a further 1-2 minutes until the vegetables are tender.Stir half of the chopped peanuts and half of the basil or coriander into the vegetables and sauce. Season with salt and freshly ground black pepper, and add more fish sauce if you want it to be a bit more salty.Finally, add the drained noodles and stir to combine.Place in a large warm serving bowl, or individual bowls. Scatter with the remaining peanuts and herbs and serve straightaway.