Preheat the oven to 220C/200C Fan/Gas 6.Roll the pastry out on a clean work surface until it's slightly larger than a 20cm/8in flan ring. Line the flan ring with the pastry and prick the base all over with a fork. Cover with cling film and chill in the fridge for at least 30 minutes.Meanwhile, heat the butter in a frying pan and gently fry the onion until soft but not coloured. Add the bacon and fry until cooked through. Drain off any excess liquid. Set aside.Remove the cling film from the pastry case, line with parchment paper and fill with ceramic baking beans or rice. Bake the pastry case in the preheated oven for 20 minutes, then remove.Reduce the oven temperature to 150C/130C Fan/Gas 2.Mix the milk, cream and eggs together in a bowl. Add the onion and bacon mixture along with the cheese. Season with salt and freshly ground black pepper.Pour the egg mixture into the pastry case, return to the oven and bake for 45 minutes to one hour until the filling is set.Carefully remove from the flan ring ring and bake on a preheated baking sheet for another five minutes to brown the pastry. Serve hot or cold.