Fry the pancetta in a large lidded saucepan over a medium heat for 5 minutes. Reduce the heat and add the olive oil and garlic and cook gently for 2 minutes. Add the fresh tomatoes, tinned tomatoes and fish stock and simmer for 5 minutes. Add the whole onion, chilli, saffron and sugar and simmer gently for 10 minutes with the lid on.Bring a large pan of salted water to the boil and cook the spaghetti according to packet instructions.Stir the crab meat into the tomato sauce and simmer for 2 minutes. Add the parsley and capers and cook for a further 2 minutes. Remove the whole onion and discard.Drain the spaghetti and add to the tomato sauce along with a knob of butter. Stir well to coat the spaghetti with the sauce, transfer to platter and serve.